# ECE564 Database Programming Project

This database project was built for ECE 564 Database Programming. This project needed to have a implementation that includes a backend database management system application consisting of advanced DB functionality such as object, abstract data types, embedded functions, embedded procedures, active elements (triggers) as well as a user interface that interacts with the database to deliver a rudimentary service.

INFO
=====

The project was a bridge health monitoring system. The database will maintain the sensor data and provide a view point into various data analytics to analyze the overall bridge health. The project primary focused on the database(PL/SQL) and a backend(PHP) framework to act as a API for sensors and any application.

The Project was divided into two stages. The first stage is the database which will handle the data and provide a dynamic framework to insert data. The Sensors for the database will follow IEEE 1451 TEDS (Transducer Electronic Data Sheet) Standard. The Health report will be run inside the database through triggers and check newly inserted data and check that the data will surpass a specific threshold. The health monitor developed was design to be only for testing purpose and only able to check if a threshold was surpassed by a sensor. The Second Stage was the PHP backend which handles the API for applications to call.

DATABASE
========

The Database was broken up into separate sections based on which aspect of the database it covers. This can be broken down into a few scripts.

| Scripts                               | Description                                       |
|:-------------------------------------:|:--------------------------------------------------|
|[init_bridge.sql](SQL/init_bridge.sql)     | Builds the bridge information system which will handle the varies characteristics of a bridge include name, location, and built date. A view is also incorporated to see all the data in a centralized output |
|[init_teds.sql](SQL/init_teds.sql)         | Builds a rudimentary version of the TEDS Standard as well as the tables to handle what type of transducer|
|[init_sensor.sql](SQL/init_sensor.sql)     | Builds the sensor information system which will maintain the sensor data in the database. The sensors will be linked to a specific bridge as well as what type of sensor from the teds table. An Data Update table will be created and used to handle the sensor statistics as well as provide the latest data entry into the database       |
|[init_health.sql](SQL/init_health.sql)     | The Health script will generate the necessary tables to handle all the reports as well as the thresholds to watch for. A trigger on the sensor data table will be activated to dynamically update and maintain the sensor data.     |
|[init_security.sql](SQL/init_security.sql) | Script which will generate an authentication system which will handle the tokens for sensor data input as well as user login.  |
|[init_db.sql](SQL/init_db.sql)     | Initialize Satabase |
|[drop_db.sql](SQL/drop_db.sql)     | Drops/Remove Database |
|[init_values.sql](SQL/init_values.sql)     | Generates Arbitrary values to test the database. |

Build the Database
-----
The database was built and developed over Oracle Database 12c.
In order to build the database you have to run the following script command.
This script will go through all the init scripts for various parts of the database and populates with test data.

```
@init_db.sql
```

Removing the Database
-----
Since this project is still in development, there is a script which will clean out the database.
If you need to quickly rebuild on a development this will be run prior to init_db.sql
Warning this will remove all the tables and information.

```
@drop_db.sql
```
BACKEND
=======

The backend interface between the database and any application/user input was developed through PHP. Several PHP scripts have been developed to maintain the output of information which was parsed through JSON as well as inputs for sensors and administration access. Each routine between an application/user and a PHP script was broken down into few scripts. Refer to the php scripts headers for proper functions and routines.

| Scripts                               | Description                                       |
|:-------------------------------------:|:--------------------------------------------------|
|[bridge.php](Website/backend/bridge.php)               | Bridge script which will output the current bridges in the database |
|[bridgesensors.php](Website/backend/bridgesensors.php) | Bridge script which will output the sensors on a specific bridge |
|[dbfunctions.php](Website/backend/dbfunctions.php)     | Collection of various functions to handle various routines with the database |
|[healthreport.php](Website/backend/healthreport.php)   | Health Report Script will provide and output of the current health reports generated by the sensor data. |
|[push.php](Website/backend/push.php)                   | Handles all the incoming data from various sensors |
|[sensorinfo.php](Website/backend/sensorinfo.php)       | Sensor Info Script will provide the various information of the sensors in the database or connected to a specific bridge |
|[config.php](Website/backend/config-sample.php)               | Configuration File for the backend, maintain credentials for access to the oracle database |
|[gentoken.php](Website/backend/admin/gentoken.php)           | Generates a new token for any sensor id and sensor id can only send data if it has the correct token |

Notes
-----
* If code on one line, High chances windows can not parse UNIX file format. Recommend using notepad++.

-----
MIT License

Â© Dan Noyes - 2015 All Rights reserved
